import"./modulepreload-polyfill-B5Qt9EMX.js";async function i(){const[t]=await chrome.tabs.query({active:!0,currentWindow:!0});if(!t?.id)throw new Error("No active tab");return t.id}function r(t){return document.getElementById(t)}function a(t){const e=r("status");e&&(e.textContent=t)}async function n(){const e=!!(await chrome.runtime.sendMessage({type:"GET_STATE"}))?.recording;r("start").disabled=e,r("stop").disabled=!e,a(e?"Recording…":"Idle")}async function o(){const t=await i(),e=r("mic").checked;a("Starting…");const s=await chrome.runtime.sendMessage({type:"START_RECORDING",tabId:t,withMic:e});if(!s?.ok)throw new Error(s?.error??"Failed to start");await n()}async function c(){a("Stopping…");const t=await chrome.runtime.sendMessage({type:"STOP_RECORDING"});if(!t?.ok)throw new Error(t?.error??"Failed to stop");const e=t?.result?.result;e?.url&&e?.filename&&await chrome.downloads.download({url:e.url,filename:e.filename,saveAs:!0}),await n()}r("start")?.addEventListener("click",()=>{o().catch(t=>a(String(t?.message??t)))});r("stop")?.addEventListener("click",()=>{c().catch(t=>a(String(t?.message??t)))});(async()=>await n())();
//# sourceMappingURL=popup.js.map
