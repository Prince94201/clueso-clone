{"version":3,"file":"content-script.js","sources":["../src/content-script.ts"],"sourcesContent":["function getToken(): string | null {\n  try {\n    return window.localStorage.getItem('token');\n  } catch {\n    return null;\n  }\n}\n\nasync function syncTokenToExtension() {\n  const token = getToken();\n  if (!token) return;\n  try {\n    await chrome.runtime.sendMessage({ type: 'AUTH_SYNC', token });\n    window.postMessage({ type: 'CLUESO_CLONE_TOKEN_SYNCED' }, '*');\n  } catch {\n    // ignore if extension not available\n  }\n}\n\n// Initial attempt on page load\nvoid syncTokenToExtension();\n\n// Re-attempt shortly after load (helps when localStorage token is set after navigation)\nsetTimeout(() => void syncTokenToExtension(), 500);\nsetTimeout(() => void syncTokenToExtension(), 2000);\n\n// Listen for explicit requests from the page\nwindow.addEventListener('message', (event) => {\n  if (event.source !== window) return;\n  if (event.data?.type !== 'CLUESO_CLONE_REQUEST_TOKEN') return;\n  void syncTokenToExtension();\n});\n\n// Listen for token changes in other tabs\nwindow.addEventListener('storage', (e) => {\n  if (e.key === 'token') void syncTokenToExtension();\n});\n"],"names":["getToken","syncTokenToExtension","token","event"],"mappings":"AAAA,SAASA,GAA0B,CACjC,GAAI,CACF,OAAO,OAAO,aAAa,QAAQ,OAAO,CAC5C,MAAQ,CACN,OAAO,IACT,CACF,CAEA,eAAeC,GAAuB,CACpC,MAAMC,EAAQF,EAAA,EACd,GAAKE,EACL,GAAI,CACF,MAAM,OAAO,QAAQ,YAAY,CAAE,KAAM,YAAa,MAAAA,EAAO,EAC7D,OAAO,YAAY,CAAE,KAAM,2BAAA,EAA+B,GAAG,CAC/D,MAAQ,CAER,CACF,CAGKD,EAAA,EAGL,WAAW,IAAA,CAAWA,EAAA,GAAwB,GAAG,EACjD,WAAW,IAAA,CAAWA,EAAA,GAAwB,GAAI,EAGlD,OAAO,iBAAiB,UAAYE,GAAU,CACxCA,EAAM,SAAW,QACjBA,EAAM,MAAM,OAAS,8BACpBF,EAAA,CACP,CAAC,EAGD,OAAO,iBAAiB,UAAY,GAAM,CACpC,EAAE,MAAQ,SAAcA,EAAA,CAC9B,CAAC"}